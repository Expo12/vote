<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Expo-project</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
    }

    .header {
      position: relative;
      text-align: center;
    }

    .header img {
      height: 80px;
      width: 80px;
      position: absolute;
    }

    .header img:first-of-type {
      left: 20px;
    }

    .header img:last-of-type {
      right: 20px;
    }

    .candidate-section {
      padding: 10px;
      text-align: center;
    }

    .candidate-table {
      width: 100%;
      max-width: 600px;
      margin: auto;
      border-collapse: collapse;
    }

    .candidate-table th,
    .candidate-table td {
      padding: 10px;
      text-align: left;
    }

    .candidate-table img {
      height: 30px;
      width: auto;
      border-radius: 50%;
    }

    @media (max-width: 768px) {
      .header img {
        height: 40px;
        width: 40px;
      }

      .candidate-table {
        font-size: 0.9em;
      }
    }

    @media (max-width: 480px) {
      .header img {
        height: 50px;
        width: 50px;
      }

      .candidate-table {
        font-size: 0.8em;
      }
    }
  </style>
</head>

<body>
  <header class="header" style="color:white; padding: 10px; text-align: center;">
    <h1 class="first" style="color: white; font-size: 2em; margin-bottom: 10px;"> Expo Project
      Subject: Computer
    </h1>

    <h2 class="subtitle" style="color: black; font-size: 1.5em; margin: 10px 0;">Topic: Online Voting System</h2>
    <h2 style="font-size: 1.5em; margin: 10px 0; color: black;">Motto: Free and fair voting without caste creed and
      religious discrimination</h2>
    <h2 class="author" style="color: black; font-size: 1em;">Created by Sanlap Chakraborty</h2>
  </header>

  <hr class="custom-hr">

  <!-- Candidate area -->
  <section class="candidate-section" style="padding: 10px;">
    <p style="text-align: center; align-items: center;">Before Voting, let's meet our esteemed candidates:</p>
    <h3 class="first" style="align-items: center; text-align: center; font-size: 1.5em;">Candidates</h3>
    <hr class="custom-hr">

    <table class="candidate-table" style="width: 100%; max-width: 600px; margin: auto;">
      <thead>
        <tr>
          <th>Image</th>
          <th>Name</th>
          <th>Symbol</th>
          <th>Party</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><img src="subha.png" alt="Candidate 1" class="candidate-img" style="height: 50px; width: auto;"></td>
          <td>Mr. Subhashito Mukherjee</td>
          <td><img src="1.jpg" alt="" style="height: 50px; width: 50px; border-radius: 50%;"></td>
          <td>Janashakti Party</td>
        </tr>
        <tr>
          <td><img src="namita.png" alt="Candidate 2" class="candidate-img" style="height: 50px; width: auto;"></td>
          <td>Mrs. Namita Pramanik</td>
          <td><img src="2.jpg" alt="" style="height: 50px; width: 50px; border-radius: 50%;"></td>
          <td>Sanjivan Party</td>
        </tr>
        <tr>
          <td><img src="hembron.png" alt="Candidate 3" class="candidate-img" style="height: 50px; width: auto;"></td>
          <td>Mrs. Dukhubala Hembrom</td>
          <td><img src="3.jpg" alt="" style="height: 50px; width: 50px; border-radius: 50%;"></td>
          <td>Bonobashi Samaj</td>
        </tr>
        <tr>
          <td><img src="muslim.png" alt="Candidate 4" class="candidate-img" style="height: 50px; width: auto;"></td>
          <td>Mr. Minahjul Abedin</td>
          <td><img src="4.jpg" alt="" style="height: 50px; width: 50px; border-radius: 50%;"></td>
          <td>Samata Party</td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- UVK Section -->
  <section class="uvk-section" style="text-align: center; margin: 20px 10px;">
    <h2 style="font-size: 1.5em;">Your Unique Voting Key (UVK)</h2>
    <form id="uvk-form" method="POST" name="uvk-form" style="max-width: 600px; margin: auto;">

      <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px;">Name:</label>
        <input type="text" name="Name" placeholder="Enter your name"
          style="width: 90%; padding: 10px; border: 1px solid #ccc; border-radius: 5px;" required>
      </div>

      <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px;">Father's Name:</label>
        <input type="text" name="Father" placeholder="Enter father's name"
          style="width: 90%; padding: 10px; border: 1px solid #ccc; border-radius: 5px;" required>
      </div>

      <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px;">Address:</label>
        <input type="text" name="Address" placeholder="Enter address"
          style="width: 90%; padding: 10px; border: 1px solid #ccc; border-radius: 5px;" required>
      </div>

      <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px;">Phone Number:</label>
        <input type="tel" name="Phone" placeholder="Enter your phone number"
          style="width: 90%; padding: 10px; border: 1px solid #ccc; border-radius: 5px;" required>
      </div>

      <div style="margin-bottom: 15px;">
        <button type="button" id="generate-uvk"
          style="padding: 10px 20px; margin-right: 5px; border: none; background-color: #28a745; color: white; cursor: pointer; border-radius: 5px;">Generate
          UVK</button>
        <button type="button" id="copy-uvk"
          style="padding: 10px 20px; border: none; background-color: #007bff; color: white; cursor: pointer; border-radius: 5px;">Copy
          UVK</button>
      </div>

      <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px;">Generated UVK:</label>
        <input type="text" id="generated-uvk" name="Uid" placeholder="Generated UVK will appear here"
          style="width: 90%; padding: 10px; border: 1px solid #ccc; border-radius: 5px;" readonly required>
      </div>

      <div style="margin-bottom: 15px;">
        <button type="submit"
          style="padding: 10px 20px; border: none; background: linear-gradient(to right, #ff8000, #ffcc00); color: black; cursor: pointer; border-radius: 5px;">Send</button>
      </div>
    </form>
  </section>

  <hr class="custom-hr">


  <!-- Main Contact Form Section -->
  <div style="display: flex; justify-content: center; align-items: center; height: auto; padding: 20px;">
    <div
      style="background-color: #f5f5f5; padding: 20px; border-radius: 10px; box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2); width: 100%; max-width: 300px;">
      <h2 style="text-align: center; color:black; font-size: 1.5em;">Registration Form</h2>
      <form method="POST" name="google-sheet" id="contact-form">
        <div style="margin-bottom: 15px; text-align: center;">
          <label style="display: block; margin-bottom: 5px; color: black;">Name:</label>
          <input type="text" name="Name" placeholder="Enter your name"
            style="width: 90%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; color: black;" required>
        </div>
        <div style="margin-bottom: 15px; text-align: center;">
          <label style="display: block; margin-bottom: 5px; color: black;">UVK/UID:</label>
          <input type="text" name="Uid" placeholder="Enter your UVK/UID"
            style="width: 90%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; color: black;" required>
        </div>
        <div style="margin-bottom: 15px; text-align: center;">
          <label style="display: block; margin-bottom: 5px; color: black;">Party:</label>
          <select name="Party"
            style="width: 95%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; color: black;">
            <option value="">Select Party</option>
            <option value="Janashakti Party">Janashakti Party</option>
            <option value="Sanjivan Party">Sanjivan Party</option>
            <option value="Bonobashi Samaj">Bonobashi Samaj</option>
            <option value="Samata Party">Samata Party</option>
          </select>
        </div>
        <div style="margin-bottom: 15px; text-align: center;">
          <input type="submit" value="Submit"
            style="background: linear-gradient(to right, #ff8000, #ffcc00); color: black; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
        </div>
      </form>
    </div>
  </div>

  <footer class="footer"
    style="text-align: center; padding: 10px; background-color: #333; color: white; font-size: 1em;">
    <p class="footer-text">Thank You For Visiting</p>
  </footer>

  <script>
   
   const generateButton = document.getElementById('generate-uvk');
const copyButton = document.getElementById('copy-uvk');
const generatedUVKField = document.getElementById('generated-uvk');
const uvkForm = document.getElementById('uvk-form');
const contactForm = document.getElementById('contact-form');

// Object to hold generated UVKs and associated names
const uvkRegistry = {};
// Object to hold phone numbers and associated names
const phoneNumberRegistry = {};

// Generate a random 5-digit UVK
generateButton.addEventListener('click', () => {
  let uniqueUVK;
  do {
    uniqueUVK = Math.floor(10000 + Math.random() * 90000).toString();
  } while (uvkRegistry[uniqueUVK]);

  generatedUVKField.value = uniqueUVK;
});

// Copy UVK to clipboard
copyButton.addEventListener('click', () => {
  const text = generatedUVKField.value;
  if (navigator.clipboard) {
    navigator.clipboard.writeText(text).then(() => {
      alert('UVK copied to clipboard');
    }).catch(error => {
      console.error('Clipboard copy failed!', error);
      alert('Failed to copy UVK to clipboard.');
    });
  } else {
    const textArea = document.createElement('textarea');
    textArea.value = text;
    document.body.appendChild(textArea);
    textArea.select();
    document.execCommand('copy');
    document.body.removeChild(textArea);
    alert('UVK copied to clipboard');
  }
});

// Submit UVK form to Google Sheets
const uvkScriptURL = 'https://script.google.com/macros/s/AKfycbxNZLFtW3Wzf-GBsDaDGBZaJXsUQPHRJqUG9Z_iY8Sa4pWc3_w1kbU8UH5YIpWArpEUoQ/exec';
uvkForm.addEventListener('submit', e => {
  e.preventDefault();
  const formData = new FormData(uvkForm);
  const name = formData.get('Name');
  const phone = formData.get('Phone');
  const uid = formData.get('Uid');

  // Check if the phone number is already registered
  if (phoneNumberRegistry[phone]) {
    alert('This phone number is already registered.');
    return;
  }

  // Register the UVK and phone number
  uvkRegistry[uid] = name;
  phoneNumberRegistry[phone] = name;

  // Submit the form data
  fetch(uvkScriptURL, {
    method: 'POST',
    body: formData
  })
  .then(response => {
    if (response.ok) {
      alert("Your Voting ID and Information have been sent.");
      uvkForm.reset(); // Reset the form after submission
    } else {
      console.error('Error!', response.statusText);
      alert('Submission failed. Please try again later.');
    }
  })
  .catch(error => {
    console.error('Error!', error.message);
    alert('An error occurred while submitting the form. Please try again.');
  });
});

// Submit contact form to Google Sheets
const contactScriptURL = 'https://script.google.com/macros/s/AKfycbzn1hLj7QDGRbXrHw_NfrNL-bAPY2RXVQizAkVTJ3DzlqvYwMEEAdFAF0s8z1FY0w63Tg/exec';
contactForm.addEventListener('submit', e => {
  e.preventDefault();
  const formData = new FormData(contactForm);
  const name = formData.get('Name');
  const uid = formData.get('Uid');
  const phone = formData.get('Phone');

  // Check if the user is trying to register with the same details but a different phone number
  if (uvkRegistry[uid] && uvkRegistry[uid] !== name) {
    alert('This user is already registered with a different UVK. Please use the original UVK.');
    return;
  }

  

  // Register the UVK in case it hasn't been registered
  uvkRegistry[uid] = name;

  fetch(contactScriptURL, {
    method: 'POST',
    body: formData
  })
  .then(response => {
    if (response.ok) {
      alert("Registration submitted successfully!");
      contactForm.reset(); // Reset the form after submission
    } else {
      console.error('Error!', response.statusText);
      alert('Submission failed. Please try again later.');
    }
  })
  .catch(error => {
    console.error('Error!', error.message);
    alert('An error occurred while submitting the form. Please try again.');
  });
});

  </script>